<?xml version="1.0" encoding="UTF-8"?>
<NamedCredential xmlns="http://soap.sforce.com/2006/04/metadata">
    <label>DonorAtlas</label>

    <!-- This is the modern container that works with External Credentials -->
    <namedCredentialType>SecuredEndpoint</namedCredentialType>
    <calloutStatus>Enabled</calloutStatus>
    <generateAuthorizationHeader>true</generateAuthorizationHeader>

    <!-- ①  Base URL -->
    <namedCredentialParameters>
        <parameterName>Url</parameterName>
        <parameterType>Url</parameterType>
        <parameterValue>https://api.donoratlas.com</parameterValue>
    </namedCredentialParameters>

    <!-- ②  Link to the External Credential *inside* the parameters array -->
    <namedCredentialParameters>
        <parameterName>ExternalCredential</parameterName>
        <parameterType>Authentication</parameterType>
        <externalCredential>Auth0_External</externalCredential>
    </namedCredentialParameters>
</NamedCredential>